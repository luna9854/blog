# Archive UX 개선 기획서

**생성일**: 2026-01-15
**최종 수정**: 2026-01-15
**상태**: 완료

---

**CRITICAL INSTRUCTIONS**: 각 Phase 완료 후:

1. 완료된 작업 체크박스 체크
2. Quality Gate 검증 명령 실행
3. 모든 Quality Gate 항목 통과 확인
4. "최종 수정" 날짜 업데이트
5. Notes 섹션에 학습 내용 문서화
6. 다음 Phase로 진행

**DO NOT** Quality Gate를 건너뛰거나 실패한 상태로 진행하지 마세요

---

## 개요

Archive 페이지의 UX를 개선하여 더 나은 사용자 경험을 제공합니다.

### 목표

1. 메인 페이지(`/`)를 `/archive`로 리다이렉트
2. 이미지 갤러리 좌우 슬라이드 기능 수정
3. 아티스트 정보를 아코디언으로 표시 (사진, 인스타, 소개)
4. 이미지 원본 비율 유지 (고정 aspect-ratio 제거)
5. 다크모드 기본 적용

### 범위

- **Small-Medium Scope**: 4개 Phase, 약 6-10시간

---

## Phase 1: 메인 페이지 리다이렉트 & 다크모드 기본값

**목표**: `/` 접속 시 `/archive`로 리다이렉트, 다크모드 강제 적용

### 작업 목록

- [ ] `src/app/page.tsx` 내용 삭제 후 리다이렉트 로직으로 교체
- [ ] `next.config.ts`에 리다이렉트 규칙 추가 (영구 리다이렉트)
- [ ] `src/app/globals.css`에서 다크모드 기본 적용 (prefers-color-scheme 제거)
- [ ] `src/app/layout.tsx`에 `dark` 클래스 추가

### Quality Gate

- [ ] 빌드 성공 (에러 없음)
- [ ] `/` 접속 시 `/archive`로 리다이렉트 확인
- [ ] 다크모드가 기본으로 적용됨 확인
- [ ] 기존 기능 회귀 없음

### 예상 시간

1-2시간

---

## Phase 2: 이미지 갤러리 슬라이드 수정

**목표**: 다중 이미지 포스트에서 좌우 화살표로 이미지 전환 가능하도록 수정

### 작업 목록

- [ ] `ImageGallery.tsx` 컴포넌트 디버깅 (현재 버튼 클릭 동작 확인)
- [ ] 좌우 버튼 클릭 이벤트 핸들러 수정
- [ ] 키보드 방향키 지원 추가 (← →)
- [ ] 이미지 인디케이터 dot 클릭 기능 확인
- [ ] 터치 스와이프 지원 추가 (모바일)

### Quality Gate

- [ ] 빌드 성공
- [ ] 다중 이미지 포스트에서 좌우 버튼 동작 확인
- [ ] 키보드 방향키로 이미지 전환 확인
- [ ] 인디케이터 dot 클릭으로 이미지 전환 확인
- [ ] 모바일에서 스와이프 동작 확인

### 예상 시간

2-3시간

---

## Phase 3: 아티스트 아코디언 구현

**목표**: 아티스트 이름 클릭 시 아코디언으로 프로필 정보 표시

### 작업 목록

- [ ] shadcn/ui Accordion 컴포넌트 설치 확인/추가
- [ ] `AuthorSection.tsx` 아코디언 구조로 리팩토링
- [ ] 아코디언 헤더: 아티스트 이름
- [ ] 아코디언 내용: 프로필 사진, 인스타그램 링크, 소개(bio)
- [ ] 아코디언 아래에 포스트 그리드 유지
- [ ] 아코디언 애니메이션 적용 (부드러운 열기/닫기)
- [ ] DB에 아티스트 프로필 사진 필드 추가 (`avatar_url`)

### 데이터베이스 변경

```sql
ALTER TABLE authors ADD COLUMN avatar_url TEXT;
```

### Quality Gate

- [ ] 빌드 성공
- [ ] 아코디언 열기/닫기 동작 확인
- [ ] 아티스트 사진, 인스타, 소개 표시 확인
- [ ] 아코디언 닫은 상태에서도 포스트 그리드 정상 표시
- [ ] 다크모드에서 스타일 확인

### 예상 시간

2-3시간

---

## Phase 4: 이미지 원본 비율 유지

**목표**: 포스트 카드 및 갤러리에서 이미지 원본 비율 유지

### 작업 목록

- [ ] `PostCard.tsx`에서 `aspect-[4/3]` 제거, 이미지 원본 비율 유지
- [ ] `ImageGallery.tsx`에서 `aspect-[4/3]` 제거
- [ ] 이미지 로딩 시 레이아웃 시프트 방지 (placeholder 또는 blur)
- [ ] Masonry 레이아웃 적용 검토 (선택적)
- [ ] 최대 높이 제한 추가 (너무 긴 이미지 처리)

### Quality Gate

- [ ] 빌드 성공
- [ ] 다양한 비율의 이미지가 원본 비율로 표시됨 확인
- [ ] 레이아웃 시프트 없이 이미지 로딩 확인
- [ ] 모바일/데스크탑 반응형 확인

### 예상 시간

1-2시간

---

## 리스크 평가

| 리스크 | 확률 | 영향 | 완화 전략 |
|--------|------|------|-----------|
| 이미지 갤러리 이벤트 버블링 이슈 | 중간 | 중간 | `stopPropagation` 사용, 이벤트 위임 검토 |
| 아코디언 애니메이션 성능 | 낮음 | 낮음 | CSS 트랜지션 사용, JS 애니메이션 최소화 |
| 원본 비율 이미지 레이아웃 깨짐 | 중간 | 중간 | `object-fit` 및 max-height 조합 |
| DB 스키마 변경 마이그레이션 | 낮음 | 낮음 | ALTER TABLE로 간단히 처리 |

---

## 롤백 전략

### Phase 1
- `next.config.ts` 리다이렉트 규칙 제거
- `page.tsx` 원복
- CSS 다크모드 미디어쿼리 복원

### Phase 2
- `ImageGallery.tsx` git revert

### Phase 3
- `AuthorSection.tsx` git revert
- DB `avatar_url` 컬럼은 유지 (데이터 손실 없음)

### Phase 4
- aspect-ratio 클래스 복원
- git revert

---

## 기술 결정

| 결정 | 선택 | 이유 |
|------|------|------|
| 리다이렉트 방식 | next.config.ts | SSR/정적 생성 모두 지원, 클라이언트 번들 불필요 |
| 아코디언 컴포넌트 | shadcn/ui Accordion | 이미 프로젝트에서 사용 중, 접근성 내장 |
| 이미지 비율 | CSS object-fit | Next.js Image 컴포넌트와 호환, 성능 우수 |
| 다크모드 강제 | CSS :root 직접 지정 | 미디어쿼리 제거로 일관된 UX |

---

## 진행 상황

- [x] Phase 0: 기획 문서 작성
- [x] Phase 1: 리다이렉트 & 다크모드 (완료)
- [x] Phase 2: 이미지 갤러리 슬라이드 (완료)
- [x] Phase 3: 아티스트 아코디언 (완료)
- [x] Phase 4: 이미지 원본 비율 (완료)

---

## Notes & 학습 내용

### Phase 1


### Phase 2


### Phase 3


### Phase 4

